<div class="predictor-container">
  <mat-card class="prediction-form-card">
    <mat-card-header>
      <mat-card-title>  专 </mat-card-title>
      <mat-card-subtitle>专  转专  专 注转</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="predictionForm" class="prediction-form">
        <mat-form-field appearance="outline">
          <mat-label>专 </mat-label>
          <mat-select formControlName="hotelId">
            <mat-option *ngFor="let hotel of hotels" [value]="hotel.hotelId">
              {{ hotel.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>转专 转</mat-label>
          <input matInput type="date" formControlName="dateFrom">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>转专 住</mat-label>
          <input matInput type="date" formControlName="dateTo">
        </mat-form-field>

        <button mat-raised-button color="primary" 
                [disabled]="predictionForm.invalid || loading"
                (click)="predict()">
          <mat-icon>analytics</mat-icon>
           专
        </button>
      </form>
    </mat-card-content>
  </mat-card>

  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
    <p>砖 ...</p>
  </div>

  <mat-card *ngIf="prediction && !loading" class="prediction-result-card">
    <mat-card-header>
      <mat-card-title>转爪转 </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="prediction-results">
        <div class="result-row">
          <div class="result-item">
            <label>专  (爪注)</label>
            <div class="value current-price">{{ prediction.currentPrice | number:'1.0-0' }}</div>
          </div>

          <div class="arrow-icon" [ngClass]="getTrendColor(prediction.trend)">
            {{ getTrendIcon(prediction.trend) }}
          </div>

          <div class="result-item">
            <label>专 爪驻</label>
            <div class="value predicted-price" [ngClass]="getTrendColor(prediction.trend)">
              {{ prediction.predictedPrice | number:'1.0-0' }}
            </div>
          </div>
        </div>

        <div class="confidence-section">
          <label>专转 </label>
          <mat-progress-bar mode="determinate" 
                            [value]="prediction.confidence"
                            [ngClass]="getConfidenceColor(prediction.confidence)">
          </mat-progress-bar>
          <span class="confidence-value">{{ prediction.confidence }}%</span>
        </div>

        <div class="recommendation-section" [ngClass]="getTrendColor(prediction.trend)">
          <mat-icon>lightbulb</mat-icon>
          <div class="recommendation-text">
            <strong>爪:</strong>
            <p>{{ prediction.recommendation }}</p>
          </div>
        </div>

        <div class="trend-info">
          <mat-chip-set>
            <mat-chip [ngClass]="getTrendColor(prediction.trend)">
              {{ getTrendIcon(prediction.trend) }} 
              : {{ prediction.trend === 'up' ? '注' : prediction.trend === 'down' ? '专转' : '爪' }}
            </mat-chip>
            <mat-chip [ngClass]="getConfidenceColor(prediction.confidence)">
              : {{ prediction.confidence >= 80 ? '' : prediction.confidence >= 60 ? '' : '' }}
            </mat-chip>
          </mat-chip-set>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
